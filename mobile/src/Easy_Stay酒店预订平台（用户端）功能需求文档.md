# Easy_Stay酒店预订平台（用户端）功能需求文档 

## 一、 项目架构 (升级)
* **项目根目录**：`easy-stay-project/`
* **用户端路径**：`packages/mobile/`
* **技术栈**：React / Taro + Node.js
* **新增模块**：用户鉴权模块 (`Auth`)、全局状态管理 (User Store)。

## 二、 核心页面功能

### 1. 酒店查询页 (首页)
* **基础功能**：Banner跳转、定位、关键字搜索、自主开发日历组件。
* **新增体验**：
    * **用户状态栏**：顶部增加“登录/我的”入口，展示用户头像（若已登录）。
    * **个性化推荐**：根据用户历史搜索记录，在首页展示“猜你喜欢”标签（可选）。

### 2. 酒店列表页
* **基础功能**：条件检索、长列表虚拟滚动、上滑加载。
* **新增体验**：
    * **会员价展示**：登录用户可看到特定的“会员折扣价”标签。

### 3. 酒店详情页
* **基础功能**：轮播图、基础信息、房型按价格升序排列。
* **新增交互**：
    * **收藏功能**：导航栏增加“收藏”按钮（需登录），点击后保存至云端。
    * **预订拦截**：点击“预订”按钮时，检查登录状态。
        * 未登录 -> 跳转登录页/弹出授权框。
        * 已登录 -> 进入订单确认页。

### 4. 用户中心 / 登录页 
* **登录/注册**：
    * 支持手机号+验证码登录（模拟或接入短信API）。
    * **技术亮点**：支持微信一键授权登录（利用 Taro 能力）。
* **个人中心**：
    * **我的收藏**：展示用户收藏的酒店列表，支持快速跳转。
    * **我的订单**：查看待入住、已完成的酒店订单状态。

## 三、 技术实现细节 (升级)

### 1. 核心技术点
* **长列表优化**：实现虚拟列表渲染，保证滑动流畅度。
* **鉴权系统 (Authentication)**：
    * 前端：使用 Context 或 Redux 存储 `userInfo` 和 `token`。
    * 路由守卫：针对“预订”、“收藏”等接口添加 Token 校验拦截器。
* **数据同步**：商户端修改价格后，移动端通过 WebSocket 或轮询机制（可选）实现秒级更新。

### 2. 数据维度 (扩展)
* **用户表**：新增 `User` 表 (ID, 手机号, 昵称, 头像, 收藏列表)。
* **优惠字段**：酒店信息增加 `discount_rate` (折扣率)，仅对登录用户生效。

## 四、 优势分析
* 实现了**完整的用户闭环**（搜索-登录-预订-收藏），超出题目基础要求。
* 实现了**路由拦截与鉴权**，体现了更高级的前端架构能力。
* 支持**收藏功能**，方便用户通过“我的收藏”快速找回意向酒店。

* 支持**会员价格体系**，增强了产品的真实商业逻辑感。